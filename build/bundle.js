(()=>{"use strict";const e=(e,t,i)=>{e.addEventListener(t,i)};let t,i;const o=document.querySelector("html"),l=document.querySelectorAll(".benefits__item");let s;let n;(()=>{const o=document.querySelector(".overlay"),l=()=>{t.classList.remove("hide"),o.classList.remove("overlay-close")};e(document,"click",(e=>{const s=e.target;s.closest(".btn-start")?s.closest(".btn-submit")?(i=t?.querySelectorAll("input.form-control")??[],0===i.length?(i=s.parentNode.parentNode.parentNode.parentNode.parentNode.querySelectorAll("input.form-control"),[...i].every((e=>""!==e.value))&&(t=document.getElementById(`${s.dataset.id}`),l())):[...i].every((e=>""!==e.value))&&(t=document.getElementById(`${s.dataset.id}`),l())):(t=document.getElementById(`${s.dataset.id}`),i=t.querySelectorAll("input.form-control"),l()):(s.matches(".overlay")||s.matches(".btn-close"))&&(i=t.querySelectorAll("input.form-control"),i.forEach((e=>{e.value="",e.classList.remove("invalid"),e.classList.remove("valid")})),t.classList.add("hide"),o.classList.add("overlay-close"))}))})(),(()=>{class t{constructor({main:e,wrap:t,next:i,slide:o,prev:l,infinity:s=!1,slidesToShow:n=3,slidesToShowMobile:r=1,position:a=0}){this.main=document.querySelector(e),this.slide=document.querySelectorAll(o),this.wrap=document.querySelector(t),this.next=document.querySelector(i),this.prev=document.querySelector(l),this.slidesToShow=n,this.slidesToShowMobile=r,this.options={position:a,infinity:s,widthSlide:Math.floor(100/this.slidesToShow),widthSlideMobile:Math.floor(100/this.slidesToShowMobile)}}init(){this.controlSlider(),this.loadMobileSlider()}loadMobileSlider(){if(o.clientWidth>576)for(let e=0;e<this.slide.length;e++)this.slide[e].style.flex=`0 0 ${this.options.widthSlide}%`;else for(let e=0;e<l.length;e++)this.slide[e].style.flex=`0 0 ${this.options.widthSlideMobile}%`}prevSlider(e,t){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slide.length-e),this.wrap.style.transform=`translateX(-${this.options.position*t}%)`)}nextSlider(e,t){(this.options.infinity||this.options.position<this.slide.length-e)&&(++this.options.position,this.options.position>this.slide.length-e&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*t}%)`)}controlSlider(){e(this.prev,"click",(()=>{o.clientWidth<576?this.prevSlider(this.slidesToShowMobile,this.options.widthSlideMobile):this.prevSlider(this.slidesToShow,this.options.widthSlide)})),e(this.next,"click",(()=>{o.clientWidth<576?this.nextSlider(this.slidesToShowMobile,this.options.widthSlideMobile):this.nextSlider(this.slidesToShow,this.options.widthSlide)}))}}const i=new t({infinity:!0,main:".benefits-inner",wrap:".benefits-wrap",slide:".benefits__item",next:".benefits__arrow--right",prev:".benefits__arrow--left"}),s=new t({infinity:!0,main:".wrap-slider",wrap:".service-slider",slide:".serv",next:".services__arrow--right",prev:".services__arrow--left",slidesToShow:2});i.init(),s.init()})(),(e=>{const t=(e,t)=>{e.forEach((e=>{e.children[1].textContent=t}))},i=document.querySelectorAll(".count_1"),o=document.querySelectorAll(".count_2"),l=document.querySelectorAll(".count_3"),n=document.querySelectorAll(".count_4"),r={};function a(){!function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,i=Math.floor(t%60),o=Math.floor(t/60%60),l=Math.floor(t/60/60%24),s=Math.floor(t/60/60/24);r.timeRemaining=t,r.days=s,r.hours=l,r.minutes=o,r.seconds=i}();const s=e=>e<10?"0"+e:+e;t(i,s(r.days)),t(o,s(r.hours)),t(l,s(r.minutes)),t(n,s(r.seconds))}a(),r.timeRemaining>0?s=setInterval(a,1e3):(i.innerText="00",o.innerText="00",l.innerText="00",n.innerText="00",clearInterval(s))})("10 august 2021 01:10"),(()=>{const i=document.querySelectorAll("input[type=text]"),o=document.querySelectorAll("input"),l=document.querySelectorAll(".btn-submit"),s=document.querySelector(".overlay");let r;o.forEach((e=>{e.setAttribute("data-placeholder",e.placeholder)})),i.forEach((t=>{e(t,"input",(function(){"phone"===this.name?this.value=this.value.replace(/[^-+()\d]/g,""):this.value=this.value.replace(/[^\sа-яёa-z]+/gi,""),this.value?(this.classList.add("valid"),this.classList.remove("invalid")):(this.classList.add("invalid"),this.classList.remove("valid"))})),e(t,"blur",(function(){"phone"===this.name&&18!==this.value.length&&(this.placeholder="Не менее 9 цифр",this.value="",this.classList.add("invalid"),this.classList.remove("valid"),setTimeout((()=>{this.placeholder=this.dataset.placeholder}),1e3))}))})),l.forEach(((i,l)=>{const a=i.parentNode.parentNode.parentNode,c="FORM"===a.parentNode.tagName?a.parentNode:a;c.setAttribute("data-index",l),i.setAttribute("data-index",l),e(i,"click",(function(e){if(e.preventDefault(),c.dataset.index===this.dataset.index){let e=c.querySelectorAll("input.form-control");e.length<=1&&(e=c.parentNode.querySelectorAll("input"));for(let t=0;t<e.length;t++)e[t].value?(e[t].classList.remove("invalid"),e[t].classList.add("valid")):(e[t].placeholder="Заполните поле",e[t].classList.add("invalid"),"phone"===e[t].name&&18!==e[t].value.length&&(e[t].value="",e[t].classList.add("invalid"),e[t].classList.remove("valid")));setTimeout((()=>{for(let t=0;t<e.length;t++)e[t].placeholder=e[t].dataset.placeholder,e[t].classList.remove("invalid"),e[t].classList.remove("valid")}),1e3),((e,i)=>{[...e].every((e=>""!==e.value))&&(e=>{const i=document.getElementById("modal-message");i.style.cssText="font-size: 2rem; min-height: 30px; margin: 30px 0; color:#000000;",(e=>{r=e.querySelectorAll("input.form-control"),i.textContent="Загрузка...";const l=new FormData(e),a={};let c;for(const e of l.entries())a[e[0]]=e[1];c=(async e=>await fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,...n})}))(a),t&&t.classList.add("hide"),s.classList.add("overlay-close"),c.then((e=>{if(200!==e.status)throw new Error("Status network not correct");i.textContent="Спасибо!Мы скоро с вами свяжемся!",o.forEach((e=>{e.value="",e.classList.remove("invalid"),e.classList.remove("valid")}))})).catch((e=>{i.textContent="Что-то пошло не так",console.error(e)}))})(e)})(c)})(e)}}))}))})(),(()=>{const t=document.querySelectorAll(".certificate-document"),i=document.querySelectorAll(".modal-certificate__container");for(const o of t)e(o,"click",(function(e){e.preventDefault(),i.forEach((e=>{e.innerHTML=`\n               <img src="${this.href}" alt/>\n            `,e.classList.remove("hide")}))}))})(),(()=>{const t=document.querySelector(".smooth-scroll"),i=document.getElementById("header"),o=document.getElementById("benefits");e(document,"scroll",(()=>{o.getBoundingClientRect().top<0?t.classList.remove("hide"):t.classList.add("hide")})),e(t,"click",(()=>{i.scrollIntoView({block:"start",behavior:"smooth"})}))})(),(()=>{const t=document.getElementById("calc-input"),i=document.getElementById("calc-type"),o=document.getElementById("calc-type-material"),l=document.getElementById("calc-total");document.querySelectorAll(".calc-control").forEach((s=>{e(s,"input",(()=>{if(t.value=t.value.replace(/\D/g,""),!isNaN(+i.value)&&!isNaN(+o.value)){const e=t.value*i.options[i.selectedIndex].value*o.options[o.selectedIndex].value;l.value=Math.floor(e),n={type:i.options[i.selectedIndex].textContent,material:o.options[o.selectedIndex].textContent,area:`${t.value} м²`,totalPrice:l.value}}}))}))})(),function(e,t="+7 (___) ___-__-__"){const i=document.querySelectorAll(e);function o(e){const i=e.keyCode,o=t,l=o.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let n=0,r=o.replace(/[_\d]/g,(e=>n<s.length?s.charAt(n++)||l.charAt(n):e));n=r.indexOf("_"),-1!==n&&(r=r.slice(0,n));let a=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<5||i>47&&i<58)&&(this.value=r),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of i)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}("input[name=phone]")})();