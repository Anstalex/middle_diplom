(()=>{"use strict";const e=(e,t,s)=>{e.addEventListener(t,s)},t=document.querySelector("html"),s=document.querySelectorAll(".benefits__item");let o;let i;(()=>{document.querySelector(".navbar-nav");const t=document.querySelector(".header-modal--opened"),s=document.querySelector(".services-modal--opened"),o=document.querySelector(".overlay"),i=(document.querySelector(".modal-all"),document.getElementById("order")),l=document.getElementById("responseMessage"),n=document.querySelectorAll(".modal-certificate");e(document,"click",(e=>{const a=e.target;a.closest(".btn-start")?(t.querySelectorAll("input").forEach((e=>{e.value="",e.classList.remove("invalid"),e.classList.remove("valid")})),o.classList.remove("overlay-close"),t.classList.remove("hide")):a.closest(".btn-start-success")?(s.querySelectorAll("input").forEach((e=>{e.value="",e.classList.remove("invalid"),e.classList.remove("valid")})),o.classList.remove("overlay-close"),s.classList.remove("hide")):a.closest(".btn-open-modal")?(i.querySelectorAll("input").forEach((e=>{e.value="",e.classList.remove("invalid"),e.classList.remove("valid")})),o.classList.remove("overlay-close"),i.classList.remove("hide")):(a.closest(".header-modal--opened")||a.closest(".services-modal--opened")||a.closest("#order")||a.closest(".modal-certificate__container")||a.closest(".btn-submit")||a.closest(".navbar-nav")||a.closest(".document-overlay"))&&!a.matches(".header-modal__close")&&!a.matches(".btn-close")&&!a.matches(".modal_close")&&!a.matches(".services-modal__close")||(e.preventDefault(),o.classList.add("overlay-close"),t.classList.add("hide"),l.classList.add("hide"),s.classList.add("hide"),i.classList.add("hide"),n.forEach((e=>{e.classList.remove("active")})))}))})(),(()=>{class o{constructor({main:e,wrap:t,next:s,slide:o,prev:i,infinity:l=!1,slidesToShow:n=3,slidesToShowMobile:a=1,position:r=0}){this.main=document.querySelector(e),this.slide=document.querySelectorAll(o),this.wrap=document.querySelector(t),this.next=document.querySelector(s),this.prev=document.querySelector(i),this.slidesToShow=n,this.slidesToShowMobile=a,this.options={position:r,infinity:l,widthSlide:Math.floor(100/this.slidesToShow),widthSlideMobile:Math.floor(100/this.slidesToShowMobile)}}init(){this.controlSlider(),this.loadMobileSlider()}loadMobileSlider(){if(t.clientWidth>576)for(let e=0;e<this.slide.length;e++)this.slide[e].style.flex=`0 0 ${this.options.widthSlide}%`;else for(let e=0;e<s.length;e++)this.slide[e].style.flex=`0 0 ${this.options.widthSlideMobile}%`}prevSlider(e,t){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slide.length-e),this.wrap.style.transform=`translateX(-${this.options.position*t}%)`)}nextSlider(e,t){(this.options.infinity||this.options.position<this.slide.length-e)&&(++this.options.position,this.options.position>this.slide.length-e&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*t}%)`)}controlSlider(){e(this.prev,"click",(()=>{t.clientWidth<576?this.prevSlider(this.slidesToShowMobile,this.options.widthSlideMobile):this.prevSlider(this.slidesToShow,this.options.widthSlide)})),e(this.next,"click",(()=>{t.clientWidth<576?this.nextSlider(this.slidesToShowMobile,this.options.widthSlideMobile):this.nextSlider(this.slidesToShow,this.options.widthSlide)}))}}const i=new o({infinity:!0,main:".benefits-inner",wrap:".benefits-wrap",slide:".benefits__item",next:".benefits__arrow--right",prev:".benefits__arrow--left"}),l=new o({infinity:!0,main:".wrap-slider",wrap:".service-slider",slide:".serv",next:".services__arrow--right",prev:".services__arrow--left",slidesToShow:2});i.init(),l.init()})(),(e=>{const t=(e,t)=>{e.forEach((e=>{e.children[1].textContent=t}))},s=document.querySelectorAll(".count_1"),i=document.querySelectorAll(".count_2"),l=document.querySelectorAll(".count_3"),n=document.querySelectorAll(".count_4"),a={};function r(){!function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,s=Math.floor(t%60),o=Math.floor(t/60%60),i=Math.floor(t/60/60%24),l=Math.floor(t/60/60/24);a.timeRemaining=t,a.days=l,a.hours=i,a.minutes=o,a.seconds=s}();const o=e=>e<10?"0"+e:+e;t(s,o(a.days)),t(i,o(a.hours)),t(l,o(a.minutes)),t(n,o(a.seconds))}r(),a.timeRemaining>0?o=setInterval(r,1e3):(s.innerText="00",i.innerText="00",l.innerText="00",n.innerText="00",clearInterval(o))})("10 august 2021 01:10"),(()=>{const t=document.querySelectorAll("input[type=text]"),s=document.querySelectorAll("input"),o=document.querySelectorAll(".btn-submit"),l=document.querySelector(".overlay"),n=document.querySelector(".header-modal"),a=document.querySelector(".services-modal--opened"),r=document.getElementById("responseMessage");let c;s.forEach((e=>{e.setAttribute("data-placeholder",e.placeholder)})),t.forEach((t=>{e(t,"input",(function(){"phone"===this.name?this.value=this.value.replace(/[^-+()\d]/g,""):this.value=this.value.replace(/[^\sа-яёa-z]+/gi,""),this.value?(this.classList.add("valid"),this.classList.remove("invalid")):(this.classList.add("invalid"),this.classList.remove("valid"))})),e(t,"blur",(function(){"phone"===this.name&&18!==this.value.length&&(this.placeholder="Не менее 9 цифр",this.value="",this.classList.add("invalid"),this.classList.remove("valid"),setTimeout((()=>{this.placeholder=this.dataset.placeholder}),1e3))}))})),o.forEach(((t,s)=>{const o=t.parentNode.parentNode.parentNode,d="FORM"===o.parentNode.tagName?o.parentNode:o;d.setAttribute("data-index",s),t.setAttribute("data-index",s),e(t,"click",(function(e){if(e.preventDefault(),d.dataset.index===this.dataset.index){let e=d.querySelectorAll("input.form-control");e.length<=1&&(e=d.parentNode.querySelectorAll("input"));for(let t=0;t<e.length;t++)e[t].value?(e[t].classList.remove("invalid"),e[t].classList.add("valid")):(e[t].placeholder="Заполните поле",e[t].classList.add("invalid"),"phone"===e[t].name&&18!==e[t].value.length&&(e[t].value="",e[t].classList.add("invalid"),e[t].classList.remove("valid")));setTimeout((()=>{for(let t=0;t<e.length;t++)e[t].placeholder=e[t].dataset.placeholder,e[t].classList.remove("invalid"),e[t].classList.remove("valid")}),1e3),((e,t)=>{[...e].every((e=>""!==e.value))&&t()})(e,(()=>{(e=>{const t=document.getElementById("modal-message");t.style.cssText="font-size: 2rem; min-height: 30px; margin: 30px 0; color:#000000;",(e=>{c=e.querySelectorAll("input.form-control"),t.textContent="Загрузка...";const s=new FormData(e),o={};let d;for(const e of s.entries())o[e[0]]=e[1];d=(async e=>await fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,...i})}))(o),"action-form"!==e.name&&"callback-form"!==e.name&&"application-form"!==e.name&&"action-form2"!==e.name&&e.parentNode.parentNode.classList.add("hide"),"callback-form"===e.name?n.classList.add("hide"):"application-form"===e.name&&a.classList.add("hide"),d.then((e=>{if(200!==e.status)throw new Error("Status network not correct");t.textContent="Спасибо!Мы скоро с вами свяжемся!"})).catch((e=>{t.textContent="Что-то пошло не так",console.error(e),setTimeout((()=>{l.classList.add("overlay-close")}),1e3)})),(()=>{for(const e of c)e.value="",r.value=""})()})(e)})(d),r.classList.remove("hide"),l.classList.add("overlay-close"),e.forEach((e=>{e.value=""}))}))}}))}))})(),(()=>{const t=document.querySelectorAll(".certificate-document"),s=document.querySelectorAll(".modal-certificate");for(const o of t)e(o,"click",(function(e){e.preventDefault(),s.forEach((e=>{e.innerHTML=`\n                <div class="modal-certificate__container">\n                    <img src="${this.href}" alt/>\n                </div>\n            `,e.classList.add("active")}))}))})(),(()=>{const t=document.querySelector(".smooth-scroll"),s=document.getElementById("offer"),o=document.getElementById("benefits");e(document,"scroll",(()=>{o.getBoundingClientRect().top<0?t.classList.remove("hide"):t.classList.add("hide")})),e(t,"click",(()=>{s.scrollIntoView({block:"start",behavior:"smooth"})}))})(),(()=>{const t=document.getElementById("calc-input"),s=document.getElementById("calc-type"),o=document.getElementById("calc-type-material"),l=document.getElementById("calc-total");document.querySelectorAll(".calc-control").forEach((n=>{e(n,"input",(()=>{if(t.value=t.value.replace(/\D/g,""),!isNaN(+s.value)&&!isNaN(+o.value)){const e=t.value*s.options[s.selectedIndex].value*o.options[o.selectedIndex].value;l.value=Math.floor(e),i={type:s.options[s.selectedIndex].textContent,material:o.options[o.selectedIndex].textContent,area:`${t.value} м²`,totalPrice:l.value}}}))}))})(),function(e,t="+7 (___) ___-__-__"){const s=document.querySelectorAll(e);function o(e){const s=e.keyCode,o=t,i=o.replace(/\D/g,""),l=this.value.replace(/\D/g,"");let n=0,a=o.replace(/[_\d]/g,(e=>n<l.length?l.charAt(n++)||i.charAt(n):e));n=a.indexOf("_"),-1!==n&&(a=a.slice(0,n));let r=o.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||s>47&&s<58)&&(this.value=a),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of s)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}("input[name=phone]")})();